apiVersion: batch/v1
kind: Job
metadata:
  name: ecr-credentials-sync-immediate
  namespace: argocd
  annotations:
    helm.sh/hook: post-install,post-upgrade
    helm.sh/hook-weight: "-5"
    helm.sh/hook-delete-policy: hook-succeeded, hook-failed
  labels:
    cronjob-name: ecr-credentials-sync
spec:
  template: {{ (lookup "batch/v1" "CronJob" .Release.Namespace "ecr-credentials-sync").spec.jobTemplate.spec.template | toYaml | nindent 4 }}
